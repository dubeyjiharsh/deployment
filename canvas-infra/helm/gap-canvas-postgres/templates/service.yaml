## Kubernetes Service manifest for the PostgreSQL instance.
## This Service exposes the Postgres pod(s) inside the cluster.

apiVersion: v1
kind: Service
metadata:
  # The full release name for this chart, generated by the helper template.
  name: {{ include "gapCanvasPostgres.fullname" . }}
  labels:
    # Standard labels for the release (name, chart, release, heritage, etc.).
    {{- include "gapCanvasPostgres.labels" . | nindent 4 }}
spec:
  # Service type is controlled by values.yaml (ClusterIP/LoadBalancer/NodePort).
  type: {{ .Values.service.type }}
  ports:
    - name: postgres
      # Port exposed by the Service (external port within cluster).
      port: {{ .Values.service.port }}
      # The targetPort refers to the container port or named port on the Pod.
      targetPort: postgres
      protocol: TCP
  selector:
    # These selectors must match the labels on the Pod template produced
    # by the StatefulSet/Deployment for the PostgreSQL instance.
    app.kubernetes.io/name: {{ include "gapCanvasPostgres.name" . }}
    app.kubernetes.io/instance: {{ .Release.Name }}
